{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, onMounted } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport { useUserStore } from \"@/store/user\";\nimport { ElMessage } from \"element-plus\";\nimport { Plus, Calendar, View, Picture } from \"@element-plus/icons-vue\";\nimport { getArticles } from \"@/api/article\";\nexport default {\n  __name: 'ArticlesView',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const router = useRouter();\n    const userStore = useUserStore();\n    const articles = ref([]);\n    const currentPage = ref(1);\n    const pageSize = ref(12);\n    const total = ref(0);\n    const loadArticles = async () => {\n      try {\n        const result = await getArticles({\n          page: currentPage.value,\n          size: pageSize.value\n        });\n        console.log(\"获取文章列表:\", result);\n        if (result.success) {\n          articles.value = result.data.records;\n          total.value = result.data.total;\n        } else {\n          ElMessage.error(result.message || \"获取文章列表失败\");\n        }\n      } catch (error) {\n        console.error(\"获取文章列表失败:\", error);\n        ElMessage.error(\"获取文章列表失败\");\n      }\n    };\n    const handleSizeChange = val => {\n      pageSize.value = val;\n      loadArticles();\n    };\n    const handleCurrentChange = val => {\n      currentPage.value = val;\n      loadArticles();\n    };\n    const formatDate = date => {\n      if (!date) return \"\";\n      return new Date(date).toLocaleDateString(\"zh-CN\", {\n        year: \"numeric\",\n        month: \"long\",\n        day: \"numeric\"\n      });\n    };\n    const goToArticle = id => {\n      router.push(`/article/${id}`);\n    };\n    const goToCreate = () => {\n      router.push(\"/article/create\");\n    };\n    onMounted(() => {\n      loadArticles();\n    });\n    const __returned__ = {\n      router,\n      userStore,\n      articles,\n      currentPage,\n      pageSize,\n      total,\n      loadArticles,\n      handleSizeChange,\n      handleCurrentChange,\n      formatDate,\n      goToArticle,\n      goToCreate,\n      ref,\n      onMounted,\n      get useRouter() {\n        return useRouter;\n      },\n      get useUserStore() {\n        return useUserStore;\n      },\n      get ElMessage() {\n        return ElMessage;\n      },\n      get Plus() {\n        return Plus;\n      },\n      get Calendar() {\n        return Calendar;\n      },\n      get View() {\n        return View;\n      },\n      get Picture() {\n        return Picture;\n      },\n      get getArticles() {\n        return getArticles;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","useRouter","useUserStore","ElMessage","Plus","Calendar","View","Picture","getArticles","router","userStore","articles","currentPage","pageSize","total","loadArticles","result","page","value","size","console","log","success","data","records","error","message","handleSizeChange","val","handleCurrentChange","formatDate","date","Date","toLocaleDateString","year","month","day","goToArticle","id","push","goToCreate"],"sources":["C:/Users/52291/Desktop/test/blog/blog/blog-frontend/src/views/ArticlesView.vue"],"sourcesContent":["<template>\r\n  <div class=\"articles-container\">\r\n    <div class=\"header\">\r\n      <div class=\"logo\">\r\n        <svg\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          viewBox=\"0 0 24 24\"\r\n          fill=\"currentColor\"\r\n        >\r\n          <path\r\n            d=\"M19 22H5a3 3 0 0 1-3-3V3a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v12h4v4a3 3 0 0 1-3 3zm-1-5v2a1 1 0 0 0 2 0v-2h-2zM6 7v2h8V7H6zm0 4v2h8v-2H6zm0 4v2h5v-2H6z\"\r\n          />\r\n        </svg>\r\n        <el-button type=\"primary\" @click=\"goToCreate\" v-if=\"userStore.userInfo\">\r\n          <el-icon><Plus /></el-icon>写文章\r\n        </el-button>\r\n        <h1>文章列表</h1>\r\n      </div>\r\n      <el-button type=\"primary\" @click=\"goToCreate\" v-if=\"userStore.userInfo\">\r\n        <el-icon><Plus /></el-icon>写文章\r\n      </el-button>\r\n    </div>\r\n\r\n    <div class=\"articles-grid\">\r\n      <el-card\r\n        v-for=\"article in articles\"\r\n        :key=\"article.id\"\r\n        class=\"article-card\"\r\n        @click=\"goToArticle(article.id)\"\r\n      >\r\n        <div class=\"article-cover\">\r\n          <el-image\r\n            :src=\"'http://localhost:8082' + article.coverImage\"\r\n            fit=\"cover\"\r\n            :preview-src-list=\"[]\"\r\n          >\r\n            <template #error>\r\n              <div class=\"image-placeholder\">\r\n                <el-icon><Picture /></el-icon>\r\n              </div>\r\n            </template>\r\n          </el-image>\r\n        </div>\r\n        <div class=\"article-content\">\r\n          <h3 class=\"article-title\">{{ article.title }}</h3>\r\n          <p class=\"article-summary\">{{ article.summary }}</p>\r\n          <div class=\"article-meta\">\r\n            <span class=\"article-date\">\r\n              <el-icon><Calendar /></el-icon>\r\n              {{ formatDate(article.createTime) }}\r\n            </span>\r\n            <span class=\"article-views\">\r\n              <el-icon><View /></el-icon>\r\n              {{ article.viewCount || 0 }} 阅读\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </el-card>\r\n    </div>\r\n\r\n    <div class=\"pagination\" v-if=\"total > 0\">\r\n      <el-pagination\r\n        v-model:current-page=\"currentPage\"\r\n        v-model:page-size=\"pageSize\"\r\n        :page-sizes=\"[12, 24, 36, 48]\"\r\n        :total=\"total\"\r\n        layout=\"total, sizes, prev, pager, next\"\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handleCurrentChange\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup name=\"ArticlesList\">\r\nimport { ref, onMounted } from \"vue\";\r\nimport { useRouter } from \"vue-router\";\r\nimport { useUserStore } from \"@/store/user\";\r\nimport { ElMessage } from \"element-plus\";\r\nimport { Plus, Calendar, View, Picture } from \"@element-plus/icons-vue\";\r\nimport { getArticles } from \"@/api/article\";\r\n\r\nconst router = useRouter();\r\nconst userStore = useUserStore();\r\n\r\nconst articles = ref([]);\r\nconst currentPage = ref(1);\r\nconst pageSize = ref(12);\r\nconst total = ref(0);\r\n\r\nconst loadArticles = async () => {\r\n  try {\r\n    const result = await getArticles({\r\n      page: currentPage.value,\r\n      size: pageSize.value,\r\n    });\r\n\r\n    console.log(\"获取文章列表:\", result);\r\n    if (result.success) {\r\n      articles.value = result.data.records;\r\n      total.value = result.data.total;\r\n    } else {\r\n      ElMessage.error(result.message || \"获取文章列表失败\");\r\n    }\r\n  } catch (error) {\r\n    console.error(\"获取文章列表失败:\", error);\r\n    ElMessage.error(\"获取文章列表失败\");\r\n  }\r\n};\r\n\r\nconst handleSizeChange = (val) => {\r\n  pageSize.value = val;\r\n  loadArticles();\r\n};\r\n\r\nconst handleCurrentChange = (val) => {\r\n  currentPage.value = val;\r\n  loadArticles();\r\n};\r\n\r\nconst formatDate = (date) => {\r\n  if (!date) return \"\";\r\n  return new Date(date).toLocaleDateString(\"zh-CN\", {\r\n    year: \"numeric\",\r\n    month: \"long\",\r\n    day: \"numeric\",\r\n  });\r\n};\r\n\r\nconst goToArticle = (id) => {\r\n  router.push(`/article/${id}`);\r\n};\r\n\r\nconst goToCreate = () => {\r\n  router.push(\"/article/create\");\r\n};\r\n\r\nonMounted(() => {\r\n  loadArticles();\r\n});\r\n</script>\r\n\r\n<!-- 样式保持不变 -->\r\n\r\n<style scoped>\r\n.articles-container {\r\n  max-width: 1200px;\r\n  margin: 40px auto;\r\n  padding: 0 20px;\r\n}\r\n\r\n.header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 30px;\r\n}\r\n\r\n.logo {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n}\r\n\r\n.logo svg {\r\n  width: 36px;\r\n  height: 36px;\r\n  fill: #6e8efb;\r\n}\r\n\r\n.logo h1 {\r\n  font-size: 28px;\r\n  color: #333;\r\n  font-weight: 600;\r\n}\r\n\r\n.articles-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));\r\n  gap: 24px;\r\n  margin-bottom: 40px;\r\n}\r\n\r\n.article-card {\r\n  cursor: pointer;\r\n  transition: transform 0.3s, box-shadow 0.3s;\r\n}\r\n\r\n.article-card:hover {\r\n  transform: translateY(-5px);\r\n  box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.article-cover {\r\n  height: 200px;\r\n  overflow: hidden;\r\n  border-radius: 8px;\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.article-cover .el-image {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.image-placeholder {\r\n  width: 100%;\r\n  height: 100%;\r\n  background: #f5f7fa;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  color: #909399;\r\n}\r\n\r\n.article-content {\r\n  padding: 0 4px;\r\n}\r\n\r\n.article-title {\r\n  font-size: 18px;\r\n  font-weight: 600;\r\n  color: #333;\r\n  margin-bottom: 8px;\r\n  line-height: 1.4;\r\n  display: -webkit-box;\r\n  -webkit-line-clamp: 2;\r\n  -webkit-box-orient: vertical;\r\n  overflow: hidden;\r\n}\r\n\r\n.article-summary {\r\n  font-size: 14px;\r\n  color: #666;\r\n  margin-bottom: 12px;\r\n  line-height: 1.6;\r\n  display: -webkit-box;\r\n  -webkit-line-clamp: 3;\r\n  -webkit-box-orient: vertical;\r\n  overflow: hidden;\r\n}\r\n\r\n.article-meta {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  font-size: 13px;\r\n  color: #999;\r\n}\r\n\r\n.article-date,\r\n.article-views {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 4px;\r\n}\r\n\r\n.pagination {\r\n  display: flex;\r\n  justify-content: center;\r\n  margin-top: 40px;\r\n}\r\n\r\n:deep(.el-button--primary) {\r\n  background: #6e8efb;\r\n  border-color: #6e8efb;\r\n}\r\n\r\n:deep(.el-button--primary:hover) {\r\n  background: #5a7de0;\r\n  border-color: #5a7de0;\r\n}\r\n</style>\r\n"],"mappings":";AA2EA,SAASA,GAAG,EAAEC,SAAS,QAAQ,KAAK;AACpC,SAASC,SAAS,QAAQ,YAAY;AACtC,SAASC,YAAY,QAAQ,cAAc;AAC3C,SAASC,SAAS,QAAQ,cAAc;AACxC,SAASC,IAAI,EAAEC,QAAQ,EAAEC,IAAI,EAAEC,OAAO,QAAQ,yBAAyB;AACvE,SAASC,WAAW,QAAQ,eAAe;;;;;;;IAE3C,MAAMC,MAAM,GAAGR,SAAS,CAAC,CAAC;IAC1B,MAAMS,SAAS,GAAGR,YAAY,CAAC,CAAC;IAEhC,MAAMS,QAAQ,GAAGZ,GAAG,CAAC,EAAE,CAAC;IACxB,MAAMa,WAAW,GAAGb,GAAG,CAAC,CAAC,CAAC;IAC1B,MAAMc,QAAQ,GAAGd,GAAG,CAAC,EAAE,CAAC;IACxB,MAAMe,KAAK,GAAGf,GAAG,CAAC,CAAC,CAAC;IAEpB,MAAMgB,YAAY,GAAG,MAAAA,CAAA,KAAY;MAC/B,IAAI;QACF,MAAMC,MAAM,GAAG,MAAMR,WAAW,CAAC;UAC/BS,IAAI,EAAEL,WAAW,CAACM,KAAK;UACvBC,IAAI,EAAEN,QAAQ,CAACK;QACjB,CAAC,CAAC;QAEFE,OAAO,CAACC,GAAG,CAAC,SAAS,EAAEL,MAAM,CAAC;QAC9B,IAAIA,MAAM,CAACM,OAAO,EAAE;UAClBX,QAAQ,CAACO,KAAK,GAAGF,MAAM,CAACO,IAAI,CAACC,OAAO;UACpCV,KAAK,CAACI,KAAK,GAAGF,MAAM,CAACO,IAAI,CAACT,KAAK;QACjC,CAAC,MAAM;UACLX,SAAS,CAACsB,KAAK,CAACT,MAAM,CAACU,OAAO,IAAI,UAAU,CAAC;QAC/C;MACF,CAAC,CAAC,OAAOD,KAAK,EAAE;QACdL,OAAO,CAACK,KAAK,CAAC,WAAW,EAAEA,KAAK,CAAC;QACjCtB,SAAS,CAACsB,KAAK,CAAC,UAAU,CAAC;MAC7B;IACF,CAAC;IAED,MAAME,gBAAgB,GAAIC,GAAG,IAAK;MAChCf,QAAQ,CAACK,KAAK,GAAGU,GAAG;MACpBb,YAAY,CAAC,CAAC;IAChB,CAAC;IAED,MAAMc,mBAAmB,GAAID,GAAG,IAAK;MACnChB,WAAW,CAACM,KAAK,GAAGU,GAAG;MACvBb,YAAY,CAAC,CAAC;IAChB,CAAC;IAED,MAAMe,UAAU,GAAIC,IAAI,IAAK;MAC3B,IAAI,CAACA,IAAI,EAAE,OAAO,EAAE;MACpB,OAAO,IAAIC,IAAI,CAACD,IAAI,CAAC,CAACE,kBAAkB,CAAC,OAAO,EAAE;QAChDC,IAAI,EAAE,SAAS;QACfC,KAAK,EAAE,MAAM;QACbC,GAAG,EAAE;MACP,CAAC,CAAC;IACJ,CAAC;IAED,MAAMC,WAAW,GAAIC,EAAE,IAAK;MAC1B7B,MAAM,CAAC8B,IAAI,CAAC,YAAYD,EAAE,EAAE,CAAC;IAC/B,CAAC;IAED,MAAME,UAAU,GAAGA,CAAA,KAAM;MACvB/B,MAAM,CAAC8B,IAAI,CAAC,iBAAiB,CAAC;IAChC,CAAC;IAEDvC,SAAS,CAAC,MAAM;MACde,YAAY,CAAC,CAAC;IAChB,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}