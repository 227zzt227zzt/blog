{"ast":null,"code":"import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"login-container\"\n};\nconst _hoisted_2 = {\n  class: \"login-form\"\n};\nconst _hoisted_3 = {\n  class: \"captcha-container\"\n};\nconst _hoisted_4 = [\"src\"];\nconst _hoisted_5 = {\n  key: 1,\n  class: \"captcha-placeholder\"\n};\nconst _hoisted_6 = {\n  key: 0\n};\nconst _hoisted_7 = {\n  key: 1\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_input = _resolveComponent(\"el-input\");\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n  const _component_el_icon = _resolveComponent(\"el-icon\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_form = _resolveComponent(\"el-form\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_cache[5] || (_cache[5] = _createStaticVNode(\"<div class=\\\"header\\\" data-v-5c6101e4><div class=\\\"logo\\\" data-v-5c6101e4><svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 24 24\\\" fill=\\\"currentColor\\\" data-v-5c6101e4><path d=\\\"M19 22H5a3 3 0 0 1-3-3V3a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v12h4v4a3 3 0 0 1-3 3zm-1-5v2a1 1 0 0 0 2 0v-2h-2zM6 7v2h8V7H6zm0 4v2h8v-2H6zm0 4v2h5v-2H6z\\\" data-v-5c6101e4></path></svg><h1 data-v-5c6101e4>博客系统</h1></div><p class=\\\"subtitle\\\" data-v-5c6101e4>分享你的知识与见解</p></div>\", 1)), _createVNode(_component_el_form, {\n    ref: \"loginForm\",\n    model: $setup.form,\n    rules: $setup.rules,\n    class: \"form-content\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_form_item, {\n      prop: \"username\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        modelValue: $setup.form.username,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.form.username = $event),\n        placeholder: \"用户名\",\n        \"prefix-icon\": \"User\"\n      }, null, 8 /* PROPS */, [\"modelValue\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_form_item, {\n      prop: \"password\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        modelValue: $setup.form.password,\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.form.password = $event),\n        type: \"password\",\n        placeholder: \"密码\",\n        \"prefix-icon\": \"Lock\",\n        \"show-password\": \"\"\n      }, null, 8 /* PROPS */, [\"modelValue\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_form_item, {\n      prop: \"captcha\"\n    }, {\n      default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_3, [_createVNode(_component_el_input, {\n        modelValue: $setup.form.captcha,\n        \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.form.captcha = $event),\n        placeholder: \"验证码\",\n        \"prefix-icon\": \"Key\",\n        class: \"captcha-input\"\n      }, null, 8 /* PROPS */, [\"modelValue\"]), _createElementVNode(\"div\", {\n        class: \"captcha-image\",\n        onClick: $setup.refreshCaptcha\n      }, [$setup.captchaImage ? (_openBlock(), _createElementBlock(\"img\", {\n        key: 0,\n        src: $setup.captchaImage,\n        alt: \"验证码\"\n      }, null, 8 /* PROPS */, _hoisted_4)) : (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [_createVNode(_component_el_icon, null, {\n        default: _withCtx(() => [_createVNode($setup[\"Refresh\"])]),\n        _: 1 /* STABLE */\n      })]))])])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_form_item, null, {\n      default: _withCtx(() => [_createVNode(_component_el_button, {\n        type: \"primary\",\n        onClick: $setup.handleLogin,\n        loading: $setup.loading,\n        class: \"login-btn\"\n      }, {\n        default: _withCtx(() => [!$setup.loading ? (_openBlock(), _createElementBlock(\"span\", _hoisted_6, \"登录\")) : (_openBlock(), _createElementBlock(\"span\", _hoisted_7, \"登录中...\"))]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"loading\"])]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"model\", \"rules\"]), _createElementVNode(\"div\", {\n    class: \"footer\"\n  }, [_createElementVNode(\"p\", null, [_cache[3] || (_cache[3] = _createTextVNode(\" 还没有账号? \")), _createElementVNode(\"span\", {\n    class: \"link\",\n    onClick: $setup.goToRegister\n  }, \"立即注册\")]), _cache[4] || (_cache[4] = _createElementVNode(\"p\", {\n    class: \"copyright\"\n  }, \"© 2024 博客系统 - 分享你的知识\", -1 /* HOISTED */))])]), _cache[6] || (_cache[6] = _createElementVNode(\"div\", {\n    class: \"decoration\"\n  }, [_createElementVNode(\"div\", {\n    class: \"circle circle-1\"\n  }), _createElementVNode(\"div\", {\n    class: \"circle circle-2\"\n  }), _createElementVNode(\"div\", {\n    class: \"circle circle-3\"\n  })], -1 /* HOISTED */))]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createVNode","_component_el_form","ref","model","$setup","form","rules","_component_el_form_item","prop","_component_el_input","username","$event","placeholder","password","type","_hoisted_3","captcha","onClick","refreshCaptcha","captchaImage","src","alt","_hoisted_5","_component_el_icon","_component_el_button","handleLogin","loading","_hoisted_6","_hoisted_7","goToRegister"],"sources":["C:\\Users\\52291\\Desktop\\test\\blog\\blog\\blog-frontend\\src\\views\\LoginView.vue"],"sourcesContent":["<template>\r\n  <div class=\"login-container\">\r\n    <div class=\"login-form\">\r\n      <div class=\"header\">\r\n        <div class=\"logo\">\r\n          <svg\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            viewBox=\"0 0 24 24\"\r\n            fill=\"currentColor\"\r\n          >\r\n            <path\r\n              d=\"M19 22H5a3 3 0 0 1-3-3V3a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v12h4v4a3 3 0 0 1-3 3zm-1-5v2a1 1 0 0 0 2 0v-2h-2zM6 7v2h8V7H6zm0 4v2h8v-2H6zm0 4v2h5v-2H6z\"\r\n            />\r\n          </svg>\r\n          <h1>博客系统</h1>\r\n        </div>\r\n        <p class=\"subtitle\">分享你的知识与见解</p>\r\n      </div>\r\n\r\n      <el-form\r\n        ref=\"loginForm\"\r\n        :model=\"form\"\r\n        :rules=\"rules\"\r\n        class=\"form-content\"\r\n      >\r\n        <el-form-item prop=\"username\">\r\n          <el-input\r\n            v-model=\"form.username\"\r\n            placeholder=\"用户名\"\r\n            prefix-icon=\"User\"\r\n          />\r\n        </el-form-item>\r\n\r\n        <el-form-item prop=\"password\">\r\n          <el-input\r\n            v-model=\"form.password\"\r\n            type=\"password\"\r\n            placeholder=\"密码\"\r\n            prefix-icon=\"Lock\"\r\n            show-password\r\n          />\r\n        </el-form-item>\r\n\r\n        <el-form-item prop=\"captcha\">\r\n          <div class=\"captcha-container\">\r\n            <el-input\r\n              v-model=\"form.captcha\"\r\n              placeholder=\"验证码\"\r\n              prefix-icon=\"Key\"\r\n              class=\"captcha-input\"\r\n            />\r\n            <div class=\"captcha-image\" @click=\"refreshCaptcha\">\r\n              <img v-if=\"captchaImage\" :src=\"captchaImage\" alt=\"验证码\" />\r\n              <div v-else class=\"captcha-placeholder\">\r\n                <el-icon><Refresh /></el-icon>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </el-form-item>\r\n\r\n        <el-form-item>\r\n          <el-button\r\n            type=\"primary\"\r\n            @click=\"handleLogin\"\r\n            :loading=\"loading\"\r\n            class=\"login-btn\"\r\n          >\r\n            <span v-if=\"!loading\">登录</span>\r\n            <span v-else>登录中...</span>\r\n          </el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n\r\n      <div class=\"footer\">\r\n        <p>\r\n          还没有账号? <span class=\"link\" @click=\"goToRegister\">立即注册</span>\r\n        </p>\r\n        <p class=\"copyright\">© 2024 博客系统 - 分享你的知识</p>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"decoration\">\r\n      <div class=\"circle circle-1\"></div>\r\n      <div class=\"circle circle-2\"></div>\r\n      <div class=\"circle circle-3\"></div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from \"vue\";\r\n\r\nimport { useRouter } from \"vue-router\";\r\nimport { useUserStore } from \"@/store/user\";\r\nimport { ElMessage } from \"element-plus\";\r\nimport { Refresh } from \"@element-plus/icons-vue\";\r\nimport { getCaptcha1, login } from \"@/api/user\";\r\nconst router = useRouter();\r\nconst userStore = useUserStore();\r\n\r\nconst form = ref({\r\n  username: \"\",\r\n  password: \"\",\r\n  captcha: \"\",\r\n  sessionId: \"\",\r\n});\r\n\r\nconst captchaImage = ref(\"\");\r\nconst loading = ref(false);\r\n\r\nconst rules = ref({\r\n  username: [\r\n    { required: true, message: \"请输入用户名\", trigger: \"blur\" },\r\n    { min: 3, max: 20, message: \"长度在 3 到 20 个字符\", trigger: \"blur\" },\r\n  ],\r\n  password: [\r\n    { required: true, message: \"请输入密码\", trigger: \"blur\" },\r\n    { min: 6, max: 20, message: \"长度在 6 到 20 个字符\", trigger: \"blur\" },\r\n  ],\r\n  // captcha: [\r\n  //   { required: true, message: '请输入验证码', trigger: 'blur' }\r\n  // ]\r\n});\r\n\r\n// 获取验证码\r\nconst getCaptcha = async () => {\r\n  const result = await getCaptcha1();\r\n  captchaImage.value = result.data;\r\n  form.value.sessionId = result.sessionId;\r\n};\r\n// 刷新验证码\r\nconst refreshCaptcha = () => {\r\n  getCaptcha();\r\n};\r\n\r\n// 处理登录\r\nconst handleLogin = async () => {\r\n  loading.value = true;\r\n  try {\r\n    const result = await login({\r\n      username: form.value.username,\r\n      password: form.value.password,\r\n      captcha: form.value.captcha,\r\n      sessionId: form.value.sessionId,\r\n    });\r\n    console;\r\n    if (result.code === 200) {\r\n      ElMessage.success(\"登录成功\");\r\n      // 保存用户信息到 store\r\n      userStore.setUserInfo({\r\n        token: result.data.token,\r\n        user: result.data.user,\r\n      });\r\n      router.push(\"/\");\r\n    } else {\r\n      ElMessage.error(result.message);\r\n      refreshCaptcha();\r\n    }\r\n  } catch (error) {\r\n    ElMessage.error(\"登录失败，请稍后重试\");\r\n    refreshCaptcha();\r\n  } finally {\r\n    loading.value = false;\r\n  }\r\n};\r\n\r\n// 跳转到注册页面\r\nconst goToRegister = () => {\r\n  router.push(\"/register\");\r\n};\r\n\r\nonMounted(() => {\r\n  refreshCaptcha();\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.login-container {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  min-height: 100vh;\r\n  background: linear-gradient(135deg, #6e8efb, #a777e3);\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n\r\n.login-form {\r\n  width: 400px;\r\n  padding: 40px;\r\n  background: rgba(255, 255, 255, 0.9);\r\n  border-radius: 16px;\r\n  box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);\r\n  backdrop-filter: blur(10px);\r\n  z-index: 10;\r\n  position: relative;\r\n}\r\n\r\n.header {\r\n  text-align: center;\r\n  margin-bottom: 30px;\r\n}\r\n\r\n.logo {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 12px;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.logo svg {\r\n  width: 36px;\r\n  height: 36px;\r\n  fill: #6e8efb;\r\n}\r\n\r\n.logo h1 {\r\n  font-size: 28px;\r\n  color: #333;\r\n  font-weight: 600;\r\n}\r\n\r\n.subtitle {\r\n  color: #666;\r\n  font-size: 16px;\r\n  margin-top: 5px;\r\n}\r\n\r\n.form-content {\r\n  margin-top: 20px;\r\n}\r\n\r\n.captcha-container {\r\n  display: flex;\r\n  gap: 10px;\r\n}\r\n\r\n.captcha-input {\r\n  flex: 1;\r\n}\r\n\r\n.captcha-image {\r\n  width: 120px;\r\n  height: 40px;\r\n  border: 1px solid #dcdfe6;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  overflow: hidden;\r\n  background: #f5f7fa;\r\n  transition: all 0.3s;\r\n}\r\n\r\n.captcha-image:hover {\r\n  border-color: #6e8efb;\r\n  transform: translateY(-2px);\r\n}\r\n\r\n.captcha-image img {\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: cover;\r\n}\r\n\r\n.captcha-placeholder {\r\n  color: #999;\r\n  font-size: 14px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.login-btn {\r\n  width: 100%;\r\n  height: 45px;\r\n  font-size: 16px;\r\n  margin-top: 10px;\r\n}\r\n\r\n.footer {\r\n  margin-top: 25px;\r\n  text-align: center;\r\n  font-size: 14px;\r\n  color: #666;\r\n}\r\n\r\n.link {\r\n  color: #6e8efb;\r\n  cursor: pointer;\r\n  font-weight: 500;\r\n  transition: color 0.3s;\r\n}\r\n\r\n.link:hover {\r\n  color: #5a7de0;\r\n  text-decoration: underline;\r\n}\r\n\r\n.copyright {\r\n  margin-top: 15px;\r\n  font-size: 12px;\r\n  color: #999;\r\n}\r\n\r\n.decoration {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  pointer-events: none;\r\n}\r\n\r\n.circle {\r\n  position: absolute;\r\n  border-radius: 50%;\r\n  background: rgba(255, 255, 255, 0.1);\r\n}\r\n\r\n.circle-1 {\r\n  width: 300px;\r\n  height: 300px;\r\n  top: -100px;\r\n  right: -100px;\r\n}\r\n\r\n.circle-2 {\r\n  width: 200px;\r\n  height: 200px;\r\n  bottom: -50px;\r\n  left: 10%;\r\n}\r\n\r\n.circle-3 {\r\n  width: 150px;\r\n  height: 150px;\r\n  top: 30%;\r\n  left: 20%;\r\n}\r\n</style>"],"mappings":";;EACOA,KAAK,EAAC;AAAiB;;EACrBA,KAAK,EAAC;AAAY;;EA0CZA,KAAK,EAAC;AAAmB;;;;EASdA,KAAK,EAAC;;;;;;;;;;;;;;uBApD9BC,mBAAA,CAqFM,OArFNC,UAqFM,GApFJC,mBAAA,CA6EM,OA7ENC,UA6EM,G,8fA5DJC,YAAA,CAoDUC,kBAAA;IAnDRC,GAAG,EAAC,WAAW;IACdC,KAAK,EAAEC,MAAA,CAAAC,IAAI;IACXC,KAAK,EAAEF,MAAA,CAAAE,KAAK;IACbX,KAAK,EAAC;;sBAEN,MAMe,CANfK,YAAA,CAMeO,uBAAA;MANDC,IAAI,EAAC;IAAU;wBAC3B,MAIE,CAJFR,YAAA,CAIES,mBAAA;oBAHSL,MAAA,CAAAC,IAAI,CAACK,QAAQ;mEAAbN,MAAA,CAAAC,IAAI,CAACK,QAAQ,GAAAC,MAAA;QACtBC,WAAW,EAAC,KAAK;QACjB,aAAW,EAAC;;;QAIhBZ,YAAA,CAQeO,uBAAA;MARDC,IAAI,EAAC;IAAU;wBAC3B,MAME,CANFR,YAAA,CAMES,mBAAA;oBALSL,MAAA,CAAAC,IAAI,CAACQ,QAAQ;mEAAbT,MAAA,CAAAC,IAAI,CAACQ,QAAQ,GAAAF,MAAA;QACtBG,IAAI,EAAC,UAAU;QACfF,WAAW,EAAC,IAAI;QAChB,aAAW,EAAC,MAAM;QAClB,eAAa,EAAb;;;QAIJZ,YAAA,CAeeO,uBAAA;MAfDC,IAAI,EAAC;IAAS;wBAC1B,MAaM,CAbNV,mBAAA,CAaM,OAbNiB,UAaM,GAZJf,YAAA,CAKES,mBAAA;oBAJSL,MAAA,CAAAC,IAAI,CAACW,OAAO;mEAAZZ,MAAA,CAAAC,IAAI,CAACW,OAAO,GAAAL,MAAA;QACrBC,WAAW,EAAC,KAAK;QACjB,aAAW,EAAC,KAAK;QACjBjB,KAAK,EAAC;+CAERG,mBAAA,CAKM;QALDH,KAAK,EAAC,eAAe;QAAEsB,OAAK,EAAEb,MAAA,CAAAc;UACtBd,MAAA,CAAAe,YAAY,I,cAAvBvB,mBAAA,CAAyD;;QAA/BwB,GAAG,EAAEhB,MAAA,CAAAe,YAAY;QAAEE,GAAG,EAAC;4DACjDzB,mBAAA,CAEM,OAFN0B,UAEM,GADJtB,YAAA,CAA8BuB,kBAAA;0BAArB,MAAW,CAAXvB,YAAA,CAAWI,MAAA,a;;;;QAM5BJ,YAAA,CAUeO,uBAAA;wBATb,MAQY,CARZP,YAAA,CAQYwB,oBAAA;QAPVV,IAAI,EAAC,SAAS;QACbG,OAAK,EAAEb,MAAA,CAAAqB,WAAW;QAClBC,OAAO,EAAEtB,MAAA,CAAAsB,OAAO;QACjB/B,KAAK,EAAC;;0BAEN,MAA+B,C,CAAlBS,MAAA,CAAAsB,OAAO,I,cAApB9B,mBAAA,CAA+B,QAAA+B,UAAA,EAAT,IAAE,M,cACxB/B,mBAAA,CAA0B,QAAAgC,UAAA,EAAb,QAAM,G;;;;;;yCAKzB9B,mBAAA,CAKM;IALDH,KAAK,EAAC;EAAQ,IACjBG,mBAAA,CAEI,Y,2CAFD,UACM,IAAAA,mBAAA,CAAoD;IAA9CH,KAAK,EAAC,MAAM;IAAEsB,OAAK,EAAEb,MAAA,CAAAyB;KAAc,MAAI,E,6BAEtD/B,mBAAA,CAA6C;IAA1CH,KAAK,EAAC;EAAW,GAAC,sBAAoB,qB,+BAI7CG,mBAAA,CAIM;IAJDH,KAAK,EAAC;EAAY,IACrBG,mBAAA,CAAmC;IAA9BH,KAAK,EAAC;EAAiB,IAC5BG,mBAAA,CAAmC;IAA9BH,KAAK,EAAC;EAAiB,IAC5BG,mBAAA,CAAmC;IAA9BH,KAAK,EAAC;EAAiB,G","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}