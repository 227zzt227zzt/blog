{"ast":null,"code":"import { createVNode as _createVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createTextVNode as _createTextVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString } from \"vue\";\nconst _hoisted_1 = {\n  class: \"articles-container\"\n};\nconst _hoisted_2 = {\n  class: \"header\"\n};\nconst _hoisted_3 = {\n  class: \"articles-grid\"\n};\nconst _hoisted_4 = {\n  class: \"article-cover\"\n};\nconst _hoisted_5 = {\n  class: \"image-placeholder\"\n};\nconst _hoisted_6 = {\n  class: \"article-content\"\n};\nconst _hoisted_7 = {\n  class: \"article-title\"\n};\nconst _hoisted_8 = {\n  class: \"article-summary\"\n};\nconst _hoisted_9 = {\n  class: \"article-meta\"\n};\nconst _hoisted_10 = {\n  class: \"article-date\"\n};\nconst _hoisted_11 = {\n  class: \"article-views\"\n};\nconst _hoisted_12 = {\n  key: 0,\n  class: \"pagination\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_icon = _resolveComponent(\"el-icon\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_image = _resolveComponent(\"el-image\");\n  const _component_el_card = _resolveComponent(\"el-card\");\n  const _component_el_pagination = _resolveComponent(\"el-pagination\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_el_button, {\n    type: \"primary\",\n    onClick: _cache[0] || (_cache[0] = $event => $setup.router.back())\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n      default: _withCtx(() => [_createVNode($setup[\"Plus\"])]),\n      _: 1 /* STABLE */\n    }), _cache[3] || (_cache[3] = _createTextVNode(\"返回 \"))]),\n    _: 1 /* STABLE */,\n    __: [3]\n  }), _cache[5] || (_cache[5] = _createElementVNode(\"div\", {\n    class: \"logo\"\n  }, [_createElementVNode(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 24 24\",\n    fill: \"currentColor\"\n  }, [_createElementVNode(\"path\", {\n    d: \"M19 22H5a3 3 0 0 1-3-3V3a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v12h4v4a3 3 0 0 1-3 3zm-1-5v2a1 1 0 0 0 2 0v-2h-2zM6 7v2h8V7H6zm0 4v2h8v-2H6zm0 4v2h5v-2H6z\"\n  })]), _createElementVNode(\"h1\", null, \"文章列表\")], -1 /* HOISTED */)), $setup.userStore.userInfo ? (_openBlock(), _createBlock(_component_el_button, {\n    key: 0,\n    type: \"primary\",\n    onClick: $setup.goToCreate\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n      default: _withCtx(() => [_createVNode($setup[\"Plus\"])]),\n      _: 1 /* STABLE */\n    }), _cache[4] || (_cache[4] = _createTextVNode(\"写文章 \"))]),\n    _: 1 /* STABLE */,\n    __: [4]\n  })) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", _hoisted_3, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.articles, article => {\n    return _openBlock(), _createBlock(_component_el_card, {\n      key: article.id,\n      class: \"article-card\",\n      onClick: $event => $setup.goToArticle(article.id)\n    }, {\n      default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_4, [_createVNode(_component_el_image, {\n        src: 'http://localhost:8082' + article.coverImage,\n        fit: \"cover\",\n        \"preview-src-list\": []\n      }, {\n        error: _withCtx(() => [_createElementVNode(\"div\", _hoisted_5, [_createVNode(_component_el_icon, null, {\n          default: _withCtx(() => [_createVNode($setup[\"Picture\"])]),\n          _: 1 /* STABLE */\n        })])]),\n        _: 2 /* DYNAMIC */\n      }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"src\"])]), _createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"h3\", _hoisted_7, _toDisplayString(article.title), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_8, _toDisplayString(article.summary), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"span\", _hoisted_10, [_createVNode(_component_el_icon, null, {\n        default: _withCtx(() => [_createVNode($setup[\"Calendar\"])]),\n        _: 1 /* STABLE */\n      }), _createTextVNode(\" \" + _toDisplayString($setup.formatDate(article.createTime)), 1 /* TEXT */)]), _createElementVNode(\"span\", _hoisted_11, [_createVNode(_component_el_icon, null, {\n        default: _withCtx(() => [_createVNode($setup[\"View\"])]),\n        _: 1 /* STABLE */\n      }), _createTextVNode(\" \" + _toDisplayString(article.viewCount || 0) + \" 阅读 \", 1 /* TEXT */)])])])]),\n      _: 2 /* DYNAMIC */\n    }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\"]);\n  }), 128 /* KEYED_FRAGMENT */))]), $setup.total > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_12, [_createVNode(_component_el_pagination, {\n    \"current-page\": $setup.currentPage,\n    \"onUpdate:currentPage\": _cache[1] || (_cache[1] = $event => $setup.currentPage = $event),\n    \"page-size\": $setup.pageSize,\n    \"onUpdate:pageSize\": _cache[2] || (_cache[2] = $event => $setup.pageSize = $event),\n    \"page-sizes\": [12, 24, 36, 48],\n    total: $setup.total,\n    layout: \"total, sizes, prev, pager, next\",\n    onSizeChange: $setup.handleSizeChange,\n    onCurrentChange: $setup.handleCurrentChange\n  }, null, 8 /* PROPS */, [\"current-page\", \"page-size\", \"total\"])])) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createVNode","_component_el_button","type","onClick","_cache","$event","$setup","router","back","_component_el_icon","xmlns","viewBox","fill","d","userStore","userInfo","_createBlock","goToCreate","_hoisted_3","_Fragment","_renderList","articles","article","_component_el_card","key","id","goToArticle","_hoisted_4","_component_el_image","src","coverImage","fit","error","_withCtx","_hoisted_5","_hoisted_6","_hoisted_7","_toDisplayString","title","_hoisted_8","summary","_hoisted_9","_hoisted_10","formatDate","createTime","_hoisted_11","viewCount","total","_hoisted_12","_component_el_pagination","currentPage","pageSize","layout","onSizeChange","handleSizeChange","onCurrentChange","handleCurrentChange"],"sources":["C:\\Users\\52291\\Desktop\\test\\blog\\blog\\blog-frontend\\src\\views\\ArticlesView.vue"],"sourcesContent":["<template>\r\n  <div class=\"articles-container\">\r\n    <div class=\"header\">\r\n      <el-button type=\"primary\" @click=\"router.back()\">\r\n        <el-icon><Plus /></el-icon>返回\r\n      </el-button>\r\n      <div class=\"logo\">\r\n        <svg\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          viewBox=\"0 0 24 24\"\r\n          fill=\"currentColor\"\r\n        >\r\n          <path\r\n            d=\"M19 22H5a3 3 0 0 1-3-3V3a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v12h4v4a3 3 0 0 1-3 3zm-1-5v2a1 1 0 0 0 2 0v-2h-2zM6 7v2h8V7H6zm0 4v2h8v-2H6zm0 4v2h5v-2H6z\"\r\n          />\r\n        </svg>\r\n        <h1>文章列表</h1>\r\n      </div>\r\n      <el-button type=\"primary\" @click=\"goToCreate\" v-if=\"userStore.userInfo\">\r\n        <el-icon><Plus /></el-icon>写文章\r\n      </el-button>\r\n    </div>\r\n\r\n    <div class=\"articles-grid\">\r\n      <el-card\r\n        v-for=\"article in articles\"\r\n        :key=\"article.id\"\r\n        class=\"article-card\"\r\n        @click=\"goToArticle(article.id)\"\r\n      >\r\n        <div class=\"article-cover\">\r\n          <el-image\r\n            :src=\"'http://localhost:8082' + article.coverImage\"\r\n            fit=\"cover\"\r\n            :preview-src-list=\"[]\"\r\n          >\r\n            <template #error>\r\n              <div class=\"image-placeholder\">\r\n                <el-icon><Picture /></el-icon>\r\n              </div>\r\n            </template>\r\n          </el-image>\r\n        </div>\r\n        <div class=\"article-content\">\r\n          <h3 class=\"article-title\">{{ article.title }}</h3>\r\n          <p class=\"article-summary\">{{ article.summary }}</p>\r\n          <div class=\"article-meta\">\r\n            <span class=\"article-date\">\r\n              <el-icon><Calendar /></el-icon>\r\n              {{ formatDate(article.createTime) }}\r\n            </span>\r\n            <span class=\"article-views\">\r\n              <el-icon><View /></el-icon>\r\n              {{ article.viewCount || 0 }} 阅读\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </el-card>\r\n    </div>\r\n\r\n    <div class=\"pagination\" v-if=\"total > 0\">\r\n      <el-pagination\r\n        v-model:current-page=\"currentPage\"\r\n        v-model:page-size=\"pageSize\"\r\n        :page-sizes=\"[12, 24, 36, 48]\"\r\n        :total=\"total\"\r\n        layout=\"total, sizes, prev, pager, next\"\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handleCurrentChange\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup name=\"ArticlesList\">\r\nimport { ref, onMounted } from \"vue\";\r\nimport { useRouter } from \"vue-router\";\r\nimport { useUserStore } from \"@/store/user\";\r\nimport { ElMessage } from \"element-plus\";\r\nimport { Plus, Calendar, View, Picture } from \"@element-plus/icons-vue\";\r\nimport { getArticles } from \"@/api/article\";\r\n\r\nconst router = useRouter();\r\nconst userStore = useUserStore();\r\n\r\nconst articles = ref([]);\r\nconst currentPage = ref(1);\r\nconst pageSize = ref(12);\r\nconst total = ref(0);\r\n\r\nconst loadArticles = async () => {\r\n  try {\r\n    const result = await getArticles({\r\n      page: currentPage.value,\r\n      size: pageSize.value,\r\n    });\r\n\r\n    console.log(\"获取文章列表:\", result);\r\n    if (result.success) {\r\n      articles.value = result.data.records;\r\n      total.value = result.data.total;\r\n    } else {\r\n      ElMessage.error(result.message || \"获取文章列表失败\");\r\n    }\r\n  } catch (error) {\r\n    console.error(\"获取文章列表失败:\", error);\r\n    ElMessage.error(\"获取文章列表失败\");\r\n  }\r\n};\r\n\r\nconst handleSizeChange = (val) => {\r\n  pageSize.value = val;\r\n  loadArticles();\r\n};\r\n\r\nconst handleCurrentChange = (val) => {\r\n  currentPage.value = val;\r\n  loadArticles();\r\n};\r\n\r\nconst formatDate = (date) => {\r\n  if (!date) return \"\";\r\n  return new Date(date).toLocaleDateString(\"zh-CN\", {\r\n    year: \"numeric\",\r\n    month: \"long\",\r\n    day: \"numeric\",\r\n  });\r\n};\r\n\r\nconst goToArticle = (id) => {\r\n  router.push(`/article/${id}`);\r\n};\r\n\r\nconst goToCreate = () => {\r\n  router.push(\"/article/create\");\r\n};\r\n\r\nonMounted(() => {\r\n  loadArticles();\r\n});\r\n</script>\r\n\r\n<!-- 样式保持不变 -->\r\n\r\n<style scoped>\r\n.articles-container {\r\n  max-width: 1200px;\r\n  margin: 40px auto;\r\n  padding: 0 20px;\r\n}\r\n\r\n.header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 30px;\r\n}\r\n\r\n.logo {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n}\r\n\r\n.logo svg {\r\n  width: 36px;\r\n  height: 36px;\r\n  fill: #6e8efb;\r\n}\r\n\r\n.logo h1 {\r\n  font-size: 28px;\r\n  color: #333;\r\n  font-weight: 600;\r\n}\r\n\r\n.articles-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));\r\n  gap: 24px;\r\n  margin-bottom: 40px;\r\n}\r\n\r\n.article-card {\r\n  cursor: pointer;\r\n  transition: transform 0.3s, box-shadow 0.3s;\r\n}\r\n\r\n.article-card:hover {\r\n  transform: translateY(-5px);\r\n  box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.article-cover {\r\n  height: 200px;\r\n  overflow: hidden;\r\n  border-radius: 8px;\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.article-cover .el-image {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.image-placeholder {\r\n  width: 100%;\r\n  height: 100%;\r\n  background: #f5f7fa;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  color: #909399;\r\n}\r\n\r\n.article-content {\r\n  padding: 0 4px;\r\n}\r\n\r\n.article-title {\r\n  font-size: 18px;\r\n  font-weight: 600;\r\n  color: #333;\r\n  margin-bottom: 8px;\r\n  line-height: 1.4;\r\n  display: -webkit-box;\r\n  -webkit-line-clamp: 2;\r\n  -webkit-box-orient: vertical;\r\n  overflow: hidden;\r\n}\r\n\r\n.article-summary {\r\n  font-size: 14px;\r\n  color: #666;\r\n  margin-bottom: 12px;\r\n  line-height: 1.6;\r\n  display: -webkit-box;\r\n  -webkit-line-clamp: 3;\r\n  -webkit-box-orient: vertical;\r\n  overflow: hidden;\r\n}\r\n\r\n.article-meta {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  font-size: 13px;\r\n  color: #999;\r\n}\r\n\r\n.article-date,\r\n.article-views {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 4px;\r\n}\r\n\r\n.pagination {\r\n  display: flex;\r\n  justify-content: center;\r\n  margin-top: 40px;\r\n}\r\n\r\n:deep(.el-button--primary) {\r\n  background: #6e8efb;\r\n  border-color: #6e8efb;\r\n}\r\n\r\n:deep(.el-button--primary:hover) {\r\n  background: #5a7de0;\r\n  border-color: #5a7de0;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}