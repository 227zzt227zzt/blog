{"ast":null,"code":"import { listTags, createTag, deleteTag, updateTag } from '@/api/tags';\nimport { ref, onMounted } from 'vue';\nimport { ElMessage, ElMessageBox } from 'element-plus';\nexport default {\n  __name: 'AllTags',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const tags = ref([]);\n    const loading = ref(false);\n    const dialogVisible = ref(false);\n    const dialogTitle = ref('');\n    const form = ref({\n      id: null,\n      name: '',\n      description: '',\n      color: ''\n    });\n    const isEdit = ref(false);\n    const fetchTags = () => {\n      loading.value = true;\n      listTags().then(res => {\n        tags.value = res.data;\n      }).finally(() => {\n        loading.value = false;\n      });\n    };\n    onMounted(() => {\n      fetchTags();\n    });\n    const handleAdd = () => {\n      dialogTitle.value = '新增标签';\n      isEdit.value = false;\n      form.value = {\n        id: null,\n        name: '',\n        description: '',\n        color: ''\n      };\n      dialogVisible.value = true;\n    };\n    const handleEdit = row => {\n      dialogTitle.value = '编辑标签';\n      isEdit.value = true;\n      form.value = {\n        ...row\n      };\n      dialogVisible.value = true;\n    };\n    const handleDelete = row => {\n      ElMessageBox.confirm('确定要删除该标签吗？', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        deleteTag(row.id).then(() => {\n          ElMessage.success('删除成功');\n          fetchTags();\n        });\n      }).catch(() => {});\n    };\n    const handleSubmit = () => {\n      if (!form.value.name) {\n        ElMessage.warning('请输入标签名称');\n        return;\n      }\n      if (isEdit.value) {\n        updateTag(form.value.id, {\n          name: form.value.name,\n          description: form.value.description,\n          color: form.value.color\n        }).then(() => {\n          ElMessage.success('修改成功');\n          dialogVisible.value = false;\n          fetchTags();\n        });\n      } else {\n        createTag({\n          name: form.value.name,\n          description: form.value.description,\n          color: form.value.color\n        }).then(() => {\n          ElMessage.success('新增成功');\n          dialogVisible.value = false;\n          fetchTags();\n        });\n      }\n    };\n    const __returned__ = {\n      tags,\n      loading,\n      dialogVisible,\n      dialogTitle,\n      form,\n      isEdit,\n      fetchTags,\n      handleAdd,\n      handleEdit,\n      handleDelete,\n      handleSubmit,\n      get listTags() {\n        return listTags;\n      },\n      get createTag() {\n        return createTag;\n      },\n      get deleteTag() {\n        return deleteTag;\n      },\n      get updateTag() {\n        return updateTag;\n      },\n      ref,\n      onMounted,\n      get ElMessage() {\n        return ElMessage;\n      },\n      get ElMessageBox() {\n        return ElMessageBox;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["listTags","createTag","deleteTag","updateTag","ref","onMounted","ElMessage","ElMessageBox","tags","loading","dialogVisible","dialogTitle","form","id","name","description","color","isEdit","fetchTags","value","then","res","data","finally","handleAdd","handleEdit","row","handleDelete","confirm","confirmButtonText","cancelButtonText","type","success","catch","handleSubmit","warning"],"sources":["C:/Users/52291/Desktop/test/blog/blog/blog-frontend/src/views/tags/AllTags.vue"],"sourcesContent":["<script setup>\nimport { listTags, createTag, deleteTag, updateTag } from '@/api/tags'\nimport { ref, onMounted } from 'vue'\nimport { ElMessage, ElMessageBox } from 'element-plus'\n\nconst tags = ref([])\nconst loading = ref(false)\nconst dialogVisible = ref(false)\nconst dialogTitle = ref('')\nconst form = ref({ id: null, name: '', description: '', color: '' })\nconst isEdit = ref(false)\nconst fetchTags = () => {\n    loading.value = true\n    listTags().then(res => {\n        tags.value = res.data\n    }).finally(() => {\n        loading.value = false\n    })\n}\n\nonMounted(() => {\n    fetchTags()\n})\n\nconst handleAdd = () => {\n    dialogTitle.value = '新增标签'\n    isEdit.value = false\n    form.value = { id: null, name: '', description: '', color: '' }\n    dialogVisible.value = true\n}\n\nconst handleEdit = (row) => {\n    dialogTitle.value = '编辑标签'\n    isEdit.value = true\n    form.value = { ...row }\n    dialogVisible.value = true\n}\n\nconst handleDelete = (row) => {\n    ElMessageBox.confirm('确定要删除该标签吗？', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning',\n    }).then(() => {\n        deleteTag(row.id).then(() => {\n            ElMessage.success('删除成功')\n            fetchTags()\n        })\n    }).catch(() => {})\n}\n\nconst handleSubmit = () => {\n    if (!form.value.name) {\n        ElMessage.warning('请输入标签名称')\n        return\n    }\n    if (isEdit.value) {\n        updateTag(form.value.id, {\n            name: form.value.name,\n            description: form.value.description,\n            color: form.value.color\n        }).then(() => {\n            ElMessage.success('修改成功')\n            dialogVisible.value = false\n            fetchTags()\n        })\n    } else {\n        createTag({\n            name: form.value.name,\n            description: form.value.description,\n            color: form.value.color\n        }).then(() => {\n            ElMessage.success('新增成功')\n            dialogVisible.value = false\n            fetchTags()\n        })\n    }\n}\n</script>\n\n<template>\n    \n<el-card>\n    <div style=\"margin-bottom: 16px; text-align: right;\">\n        <el-button type=\"primary\" @click=\"handleAdd\">新增标签</el-button>\n    </div>\n    <el-table :data=\"tags\" style=\"width: 100%\" :loading=\"loading\">\n        <el-table-column label=\"标签名称\">\n            <template #default=\"scope\">\n                <el-tag :style=\"{ backgroundColor: scope.row.color, color: '#fff', border: 'none', cursor: 'pointer', transition: 'background 0.2s' }\">\n                    {{ scope.row.name }}\n                </el-tag>\n            </template>\n        </el-table-column>\n        <el-table-column prop=\"description\" label=\"描述\" />\n        <el-table-column label=\"操作\" width=\"180\">\n            <template #default=\"scope\">\n                <el-button size=\"small\" @click=\"handleEdit(scope.row)\">编辑</el-button>\n                <el-button size=\"small\" type=\"danger\" @click=\"handleDelete(scope.row)\">删除</el-button>\n            </template>\n        </el-table-column>\n    </el-table>\n    <el-dialog v-model=\"dialogVisible\" :title=\"dialogTitle\" width=\"400px\">\n        <el-form :model=\"form\" label-width=\"80px\">\n            <el-form-item label=\"标签名称\">\n                <el-input v-model=\"form.name\" />\n            </el-form-item>\n            <el-form-item label=\"描述\">\n                <el-input v-model=\"form.description\" />\n            </el-form-item>\n            <el-form-item label=\"颜色\">\n                <el-color-picker v-model=\"form.color\" />\n                <el-input v-model=\"form.color\" style=\"width: 120px; margin-left: 10px;\" />\n            </el-form-item>\n        </el-form>\n        <template #footer>\n            <el-button @click=\"dialogVisible = false\">取消</el-button>\n            <el-button type=\"primary\" @click=\"handleSubmit\">确定</el-button>\n        </template>\n    </el-dialog>\n</el-card>\n</template>\n\n<style scoped>\n/* 移除悬停效果，保持 el-tag 悬停和普通状态一致 */\n:deep(.el-tag) {\n  transition: none;\n}\n</style>\n\n"],"mappings":"AACA,SAASA,QAAQ,EAAEC,SAAS,EAAEC,SAAS,EAAEC,SAAS,QAAQ,YAAW;AACrE,SAASC,GAAG,EAAEC,SAAS,QAAQ,KAAI;AACnC,SAASC,SAAS,EAAEC,YAAY,QAAQ,cAAa;;;;;;;IAErD,MAAMC,IAAI,GAAGJ,GAAG,CAAC,EAAE;IACnB,MAAMK,OAAO,GAAGL,GAAG,CAAC,KAAK;IACzB,MAAMM,aAAa,GAAGN,GAAG,CAAC,KAAK;IAC/B,MAAMO,WAAW,GAAGP,GAAG,CAAC,EAAE;IAC1B,MAAMQ,IAAI,GAAGR,GAAG,CAAC;MAAES,EAAE,EAAE,IAAI;MAAEC,IAAI,EAAE,EAAE;MAAEC,WAAW,EAAE,EAAE;MAAEC,KAAK,EAAE;IAAG,CAAC;IACnE,MAAMC,MAAM,GAAGb,GAAG,CAAC,KAAK;IACxB,MAAMc,SAAS,GAAGA,CAAA,KAAM;MACpBT,OAAO,CAACU,KAAK,GAAG,IAAG;MACnBnB,QAAQ,CAAC,CAAC,CAACoB,IAAI,CAACC,GAAG,IAAI;QACnBb,IAAI,CAACW,KAAK,GAAGE,GAAG,CAACC,IAAG;MACxB,CAAC,CAAC,CAACC,OAAO,CAAC,MAAM;QACbd,OAAO,CAACU,KAAK,GAAG,KAAI;MACxB,CAAC;IACL;IAEAd,SAAS,CAAC,MAAM;MACZa,SAAS,CAAC;IACd,CAAC;IAED,MAAMM,SAAS,GAAGA,CAAA,KAAM;MACpBb,WAAW,CAACQ,KAAK,GAAG,MAAK;MACzBF,MAAM,CAACE,KAAK,GAAG,KAAI;MACnBP,IAAI,CAACO,KAAK,GAAG;QAAEN,EAAE,EAAE,IAAI;QAAEC,IAAI,EAAE,EAAE;QAAEC,WAAW,EAAE,EAAE;QAAEC,KAAK,EAAE;MAAG;MAC9DN,aAAa,CAACS,KAAK,GAAG,IAAG;IAC7B;IAEA,MAAMM,UAAU,GAAIC,GAAG,IAAK;MACxBf,WAAW,CAACQ,KAAK,GAAG,MAAK;MACzBF,MAAM,CAACE,KAAK,GAAG,IAAG;MAClBP,IAAI,CAACO,KAAK,GAAG;QAAE,GAAGO;MAAI;MACtBhB,aAAa,CAACS,KAAK,GAAG,IAAG;IAC7B;IAEA,MAAMQ,YAAY,GAAID,GAAG,IAAK;MAC1BnB,YAAY,CAACqB,OAAO,CAAC,YAAY,EAAE,IAAI,EAAE;QACrCC,iBAAiB,EAAE,IAAI;QACvBC,gBAAgB,EAAE,IAAI;QACtBC,IAAI,EAAE;MACV,CAAC,CAAC,CAACX,IAAI,CAAC,MAAM;QACVlB,SAAS,CAACwB,GAAG,CAACb,EAAE,CAAC,CAACO,IAAI,CAAC,MAAM;UACzBd,SAAS,CAAC0B,OAAO,CAAC,MAAM;UACxBd,SAAS,CAAC;QACd,CAAC;MACL,CAAC,CAAC,CAACe,KAAK,CAAC,MAAM,CAAC,CAAC;IACrB;IAEA,MAAMC,YAAY,GAAGA,CAAA,KAAM;MACvB,IAAI,CAACtB,IAAI,CAACO,KAAK,CAACL,IAAI,EAAE;QAClBR,SAAS,CAAC6B,OAAO,CAAC,SAAS;QAC3B;MACJ;MACA,IAAIlB,MAAM,CAACE,KAAK,EAAE;QACdhB,SAAS,CAACS,IAAI,CAACO,KAAK,CAACN,EAAE,EAAE;UACrBC,IAAI,EAAEF,IAAI,CAACO,KAAK,CAACL,IAAI;UACrBC,WAAW,EAAEH,IAAI,CAACO,KAAK,CAACJ,WAAW;UACnCC,KAAK,EAAEJ,IAAI,CAACO,KAAK,CAACH;QACtB,CAAC,CAAC,CAACI,IAAI,CAAC,MAAM;UACVd,SAAS,CAAC0B,OAAO,CAAC,MAAM;UACxBtB,aAAa,CAACS,KAAK,GAAG,KAAI;UAC1BD,SAAS,CAAC;QACd,CAAC;MACL,CAAC,MAAM;QACHjB,SAAS,CAAC;UACNa,IAAI,EAAEF,IAAI,CAACO,KAAK,CAACL,IAAI;UACrBC,WAAW,EAAEH,IAAI,CAACO,KAAK,CAACJ,WAAW;UACnCC,KAAK,EAAEJ,IAAI,CAACO,KAAK,CAACH;QACtB,CAAC,CAAC,CAACI,IAAI,CAAC,MAAM;UACVd,SAAS,CAAC0B,OAAO,CAAC,MAAM;UACxBtB,aAAa,CAACS,KAAK,GAAG,KAAI;UAC1BD,SAAS,CAAC;QACd,CAAC;MACL;IACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}