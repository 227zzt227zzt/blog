{"ast":null,"code":"import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createVNode as _createVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createTextVNode as _createTextVNode, createBlock as _createBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString } from \"vue\";\nconst _hoisted_1 = {\n  class: \"articles-container\"\n};\nconst _hoisted_2 = {\n  class: \"header\"\n};\nconst _hoisted_3 = {\n  class: \"articles-grid\"\n};\nconst _hoisted_4 = {\n  class: \"article-cover\"\n};\nconst _hoisted_5 = {\n  class: \"image-placeholder\"\n};\nconst _hoisted_6 = {\n  class: \"article-content\"\n};\nconst _hoisted_7 = {\n  class: \"article-title\"\n};\nconst _hoisted_8 = {\n  class: \"article-summary\"\n};\nconst _hoisted_9 = {\n  class: \"article-meta\"\n};\nconst _hoisted_10 = {\n  class: \"article-date\"\n};\nconst _hoisted_11 = {\n  class: \"article-views\"\n};\nconst _hoisted_12 = {\n  key: 0,\n  class: \"pagination\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_icon = _resolveComponent(\"el-icon\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_image = _resolveComponent(\"el-image\");\n  const _component_el_card = _resolveComponent(\"el-card\");\n  const _component_el_pagination = _resolveComponent(\"el-pagination\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_cache[3] || (_cache[3] = _createElementVNode(\"div\", {\n    class: \"logo\"\n  }, [_createElementVNode(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 24 24\",\n    fill: \"currentColor\"\n  }, [_createElementVNode(\"path\", {\n    d: \"M19 22H5a3 3 0 0 1-3-3V3a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v12h4v4a3 3 0 0 1-3 3zm-1-5v2a1 1 0 0 0 2 0v-2h-2zM6 7v2h8V7H6zm0 4v2h8v-2H6zm0 4v2h5v-2H6z\"\n  })]), _createElementVNode(\"h1\", null, \"文章列表\")], -1 /* HOISTED */)), $setup.userStore.userInfo ? (_openBlock(), _createBlock(_component_el_button, {\n    key: 0,\n    type: \"primary\",\n    onClick: $setup.goToCreate\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n      default: _withCtx(() => [_createVNode($setup[\"Plus\"])]),\n      _: 1 /* STABLE */\n    }), _cache[2] || (_cache[2] = _createTextVNode(\"写文章 \"))]),\n    _: 1 /* STABLE */,\n    __: [2]\n  })) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", _hoisted_3, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.articles, article => {\n    return _openBlock(), _createBlock(_component_el_card, {\n      key: article.id,\n      class: \"article-card\",\n      onClick: $event => $setup.goToArticle(article.id)\n    }, {\n      default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_4, [_createVNode(_component_el_image, {\n        src: 'http://localhost:8082' + article.coverImage,\n        fit: \"cover\",\n        \"preview-src-list\": []\n      }, {\n        error: _withCtx(() => [_createElementVNode(\"div\", _hoisted_5, [_createVNode(_component_el_icon, null, {\n          default: _withCtx(() => [_createVNode($setup[\"Picture\"])]),\n          _: 1 /* STABLE */\n        })])]),\n        _: 2 /* DYNAMIC */\n      }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"src\"])]), _createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"h3\", _hoisted_7, _toDisplayString(article.title), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_8, _toDisplayString(article.summary), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"span\", _hoisted_10, [_createVNode(_component_el_icon, null, {\n        default: _withCtx(() => [_createVNode($setup[\"Calendar\"])]),\n        _: 1 /* STABLE */\n      }), _createTextVNode(\" \" + _toDisplayString($setup.formatDate(article.createTime)), 1 /* TEXT */)]), _createElementVNode(\"span\", _hoisted_11, [_createVNode(_component_el_icon, null, {\n        default: _withCtx(() => [_createVNode($setup[\"View\"])]),\n        _: 1 /* STABLE */\n      }), _createTextVNode(\" \" + _toDisplayString(article.viewCount || 0) + \" 阅读 \", 1 /* TEXT */)])])])]),\n      _: 2 /* DYNAMIC */\n    }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\"]);\n  }), 128 /* KEYED_FRAGMENT */))]), $setup.total > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_12, [_createVNode(_component_el_pagination, {\n    \"current-page\": $setup.currentPage,\n    \"onUpdate:currentPage\": _cache[0] || (_cache[0] = $event => $setup.currentPage = $event),\n    \"page-size\": $setup.pageSize,\n    \"onUpdate:pageSize\": _cache[1] || (_cache[1] = $event => $setup.pageSize = $event),\n    \"page-sizes\": [12, 24, 36, 48],\n    total: $setup.total,\n    layout: \"total, sizes, prev, pager, next\",\n    onSizeChange: $setup.handleSizeChange,\n    onCurrentChange: $setup.handleCurrentChange\n  }, null, 8 /* PROPS */, [\"current-page\", \"page-size\", \"total\"])])) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","xmlns","viewBox","fill","d","$setup","userStore","userInfo","_createBlock","_component_el_button","type","onClick","goToCreate","_createVNode","_component_el_icon","_hoisted_3","_Fragment","_renderList","articles","article","_component_el_card","key","id","$event","goToArticle","_hoisted_4","_component_el_image","src","coverImage","fit","error","_withCtx","_hoisted_5","_hoisted_6","_hoisted_7","_toDisplayString","title","_hoisted_8","summary","_hoisted_9","_hoisted_10","formatDate","createTime","_hoisted_11","viewCount","total","_hoisted_12","_component_el_pagination","currentPage","pageSize","layout","onSizeChange","handleSizeChange","onCurrentChange","handleCurrentChange"],"sources":["C:\\Users\\52291\\Desktop\\test\\blog\\blog\\blog-frontend\\src\\views\\ArticlesView.vue"],"sourcesContent":["<template>\r\n  <div class=\"articles-container\">\r\n    <div class=\"header\">\r\n      <div class=\"logo\">\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n          <path d=\"M19 22H5a3 3 0 0 1-3-3V3a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v12h4v4a3 3 0 0 1-3 3zm-1-5v2a1 1 0 0 0 2 0v-2h-2zM6 7v2h8V7H6zm0 4v2h8v-2H6zm0 4v2h5v-2H6z\"/>\r\n        </svg>\r\n        <h1>文章列表</h1>\r\n      </div>\r\n      <el-button type=\"primary\" @click=\"goToCreate\" v-if=\"userStore.userInfo\">\r\n        <el-icon><Plus /></el-icon>写文章\r\n      </el-button>\r\n    </div>\r\n\r\n    <div class=\"articles-grid\">\r\n      <el-card v-for=\"article in articles\" :key=\"article.id\" class=\"article-card\" @click=\"goToArticle(article.id)\">\r\n        <div class=\"article-cover\">\r\n          <el-image \r\n            :src=\"'http://localhost:8082' + article.coverImage\"\r\n            fit=\"cover\"\r\n            :preview-src-list=\"[]\"\r\n          >\r\n            <template #error>\r\n              <div class=\"image-placeholder\">\r\n                <el-icon><Picture /></el-icon>\r\n              </div>\r\n            </template>\r\n          </el-image>\r\n        </div>\r\n        <div class=\"article-content\">\r\n          <h3 class=\"article-title\">{{ article.title }}</h3>\r\n          <p class=\"article-summary\">{{ article.summary }}</p>\r\n          <div class=\"article-meta\">\r\n            <span class=\"article-date\">\r\n              <el-icon><Calendar /></el-icon>\r\n              {{ formatDate(article.createTime) }}\r\n            </span>\r\n            <span class=\"article-views\">\r\n              <el-icon><View /></el-icon>\r\n              {{ article.viewCount || 0 }} 阅读\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </el-card>\r\n    </div>\r\n\r\n    <div class=\"pagination\" v-if=\"total > 0\">\r\n      <el-pagination\r\n        v-model:current-page=\"currentPage\"\r\n        v-model:page-size=\"pageSize\"\r\n        :page-sizes=\"[12, 24, 36, 48]\"\r\n        :total=\"total\"\r\n        layout=\"total, sizes, prev, pager, next\"\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handleCurrentChange\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup name=\"ArticlesList\">\r\nimport { ref, onMounted } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport { useUserStore } from '@/store/user'\r\nimport { ElMessage } from 'element-plus'\r\nimport { Plus, Calendar, View, Picture } from '@element-plus/icons-vue'\r\nimport { getArticles } from '@/api/article'\r\n\r\nconst router = useRouter()\r\nconst userStore = useUserStore()\r\n\r\nconst articles = ref([])\r\nconst currentPage = ref(1)\r\nconst pageSize = ref(12)\r\nconst total = ref(0)\r\n\r\nconst loadArticles = async () => {\r\n  try {\r\n    const result = await getArticles({\r\n      page: currentPage.value,\r\n      size: pageSize.value\r\n    })\r\n    \r\n    console.log('获取文章列表:', result)\r\n    if (result.success) {\r\n      articles.value = result.data.records\r\n      total.value = result.data.total\r\n    } else {\r\n      ElMessage.error(result.message || '获取文章列表失败')\r\n    }\r\n  } catch (error) {\r\n    console.error('获取文章列表失败:', error)\r\n    ElMessage.error('获取文章列表失败')\r\n  }\r\n}\r\n\r\nconst handleSizeChange = (val) => {\r\n  pageSize.value = val\r\n  loadArticles()\r\n}\r\n\r\nconst handleCurrentChange = (val) => {\r\n  currentPage.value = val\r\n  loadArticles()\r\n}\r\n\r\nconst formatDate = (date) => {\r\n  if (!date) return ''\r\n  return new Date(date).toLocaleDateString('zh-CN', {\r\n    year: 'numeric',\r\n    month: 'long',\r\n    day: 'numeric'\r\n  })\r\n}\r\n\r\nconst goToArticle = (id) => {\r\n  router.push(`/article/${id}`)\r\n}\r\n\r\nconst goToCreate = () => {\r\n  router.push('/article/create')\r\n}\r\n\r\nonMounted(() => {\r\n  loadArticles()\r\n})\r\n</script>\r\n\r\n<!-- 样式保持不变 -->\r\n\r\n<style scoped>\r\n.articles-container {\r\n  max-width: 1200px;\r\n  margin: 40px auto;\r\n  padding: 0 20px;\r\n}\r\n\r\n.header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 30px;\r\n}\r\n\r\n.logo {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n}\r\n\r\n.logo svg {\r\n  width: 36px;\r\n  height: 36px;\r\n  fill: #6e8efb;\r\n}\r\n\r\n.logo h1 {\r\n  font-size: 28px;\r\n  color: #333;\r\n  font-weight: 600;\r\n}\r\n\r\n.articles-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));\r\n  gap: 24px;\r\n  margin-bottom: 40px;\r\n}\r\n\r\n.article-card {\r\n  cursor: pointer;\r\n  transition: transform 0.3s, box-shadow 0.3s;\r\n}\r\n\r\n.article-card:hover {\r\n  transform: translateY(-5px);\r\n  box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.article-cover {\r\n  height: 200px;\r\n  overflow: hidden;\r\n  border-radius: 8px;\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.article-cover .el-image {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.image-placeholder {\r\n  width: 100%;\r\n  height: 100%;\r\n  background: #f5f7fa;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  color: #909399;\r\n}\r\n\r\n.article-content {\r\n  padding: 0 4px;\r\n}\r\n\r\n.article-title {\r\n  font-size: 18px;\r\n  font-weight: 600;\r\n  color: #333;\r\n  margin-bottom: 8px;\r\n  line-height: 1.4;\r\n  display: -webkit-box;\r\n  -webkit-line-clamp: 2;\r\n  -webkit-box-orient: vertical;\r\n  overflow: hidden;\r\n}\r\n\r\n.article-summary {\r\n  font-size: 14px;\r\n  color: #666;\r\n  margin-bottom: 12px;\r\n  line-height: 1.6;\r\n  display: -webkit-box;\r\n  -webkit-line-clamp: 3;\r\n  -webkit-box-orient: vertical;\r\n  overflow: hidden;\r\n}\r\n\r\n.article-meta {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  font-size: 13px;\r\n  color: #999;\r\n}\r\n\r\n.article-date, .article-views {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 4px;\r\n}\r\n\r\n.pagination {\r\n  display: flex;\r\n  justify-content: center;\r\n  margin-top: 40px;\r\n}\r\n\r\n:deep(.el-button--primary) {\r\n  background: #6e8efb;\r\n  border-color: #6e8efb;\r\n}\r\n\r\n:deep(.el-button--primary:hover) {\r\n  background: #5a7de0;\r\n  border-color: #5a7de0;\r\n}\r\n</style>\r\n"],"mappings":";;EACOA,KAAK,EAAC;AAAoB;;EACxBA,KAAK,EAAC;AAAQ;;EAYdA,KAAK,EAAC;AAAe;;EAEjBA,KAAK,EAAC;AAAe;;EAOfA,KAAK,EAAC;AAAmB;;EAM/BA,KAAK,EAAC;AAAiB;;EACtBA,KAAK,EAAC;AAAe;;EACtBA,KAAK,EAAC;AAAiB;;EACrBA,KAAK,EAAC;AAAc;;EACjBA,KAAK,EAAC;AAAc;;EAIpBA,KAAK,EAAC;AAAe;;;EAS9BA,KAAK,EAAC;;;;;;;;uBA7CbC,mBAAA,CAwDM,OAxDNC,UAwDM,GAvDJC,mBAAA,CAUM,OAVNC,UAUM,G,0BATJD,mBAAA,CAKM;IALDH,KAAK,EAAC;EAAM,IACfG,mBAAA,CAEM;IAFDE,KAAK,EAAC,4BAA4B;IAACC,OAAO,EAAC,WAAW;IAACC,IAAI,EAAC;MAC/DJ,mBAAA,CAA8J;IAAxJK,CAAC,EAAC;EAAoJ,G,GAE9JL,mBAAA,CAAa,YAAT,MAAI,E,sBAE0CM,MAAA,CAAAC,SAAS,CAACC,QAAQ,I,cAAtEC,YAAA,CAEYC,oBAAA;;IAFDC,IAAI,EAAC,SAAS;IAAEC,OAAK,EAAEN,MAAA,CAAAO;;sBAChC,MAA2B,CAA3BC,YAAA,CAA2BC,kBAAA;wBAAlB,MAAQ,CAARD,YAAA,CAAQR,MAAA,U;;mDAAU,MAC7B,G;;;6CAGFN,mBAAA,CA8BM,OA9BNgB,UA8BM,I,kBA7BJlB,mBAAA,CA4BUmB,SAAA,QAAAC,WAAA,CA5BiBZ,MAAA,CAAAa,QAAQ,EAAnBC,OAAO;yBAAvBX,YAAA,CA4BUY,kBAAA;MA5B4BC,GAAG,EAAEF,OAAO,CAACG,EAAE;MAAE1B,KAAK,EAAC,cAAc;MAAEe,OAAK,EAAAY,MAAA,IAAElB,MAAA,CAAAmB,WAAW,CAACL,OAAO,CAACG,EAAE;;wBACxG,MAYM,CAZNvB,mBAAA,CAYM,OAZN0B,UAYM,GAXJZ,YAAA,CAUWa,mBAAA;QATRC,GAAG,4BAA4BR,OAAO,CAACS,UAAU;QAClDC,GAAG,EAAC,OAAO;QACV,kBAAgB,EAAE;;QAERC,KAAK,EAAAC,QAAA,CACd,MAEM,CAFNhC,mBAAA,CAEM,OAFNiC,UAEM,GADJnB,YAAA,CAA8BC,kBAAA;4BAArB,MAAW,CAAXD,YAAA,CAAWR,MAAA,a;;;;sDAK5BN,mBAAA,CAaM,OAbNkC,UAaM,GAZJlC,mBAAA,CAAkD,MAAlDmC,UAAkD,EAAAC,gBAAA,CAArBhB,OAAO,CAACiB,KAAK,kBAC1CrC,mBAAA,CAAoD,KAApDsC,UAAoD,EAAAF,gBAAA,CAAtBhB,OAAO,CAACmB,OAAO,kBAC7CvC,mBAAA,CASM,OATNwC,UASM,GARJxC,mBAAA,CAGO,QAHPyC,WAGO,GAFL3B,YAAA,CAA+BC,kBAAA;0BAAtB,MAAY,CAAZD,YAAA,CAAYR,MAAA,c;;2BAAU,GAC/B,GAAA8B,gBAAA,CAAG9B,MAAA,CAAAoC,UAAU,CAACtB,OAAO,CAACuB,UAAU,kB,GAElC3C,mBAAA,CAGO,QAHP4C,WAGO,GAFL9B,YAAA,CAA2BC,kBAAA;0BAAlB,MAAQ,CAARD,YAAA,CAAQR,MAAA,U;;2BAAU,GAC3B,GAAA8B,gBAAA,CAAGhB,OAAO,CAACyB,SAAS,SAAQ,MAC9B,gB;;;oCAMsBvC,MAAA,CAAAwC,KAAK,Q,cAAnChD,mBAAA,CAUM,OAVNiD,WAUM,GATJjC,YAAA,CAQEkC,wBAAA;IAPQ,cAAY,EAAE1C,MAAA,CAAA2C,WAAW;gEAAX3C,MAAA,CAAA2C,WAAW,GAAAzB,MAAA;IACzB,WAAS,EAAElB,MAAA,CAAA4C,QAAQ;6DAAR5C,MAAA,CAAA4C,QAAQ,GAAA1B,MAAA;IAC1B,YAAU,EAAE,gBAAgB;IAC5BsB,KAAK,EAAExC,MAAA,CAAAwC,KAAK;IACbK,MAAM,EAAC,iCAAiC;IACvCC,YAAW,EAAE9C,MAAA,CAAA+C,gBAAgB;IAC7BC,eAAc,EAAEhD,MAAA,CAAAiD","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}