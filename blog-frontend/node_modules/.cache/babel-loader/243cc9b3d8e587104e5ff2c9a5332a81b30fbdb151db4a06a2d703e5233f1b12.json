{"ast":null,"code":"import { listTags, createTag, deleteTag, updateTag } from '@/api/tags';\nimport { ref, onMounted } from 'vue';\nimport { ElMessage, ElMessageBox } from 'element-plus';\nexport default {\n  __name: 'AllTags',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const tags = ref([]);\n    const loading = ref(false);\n    const dialogVisible = ref(false);\n    const dialogTitle = ref('');\n    const form = ref({\n      id: null,\n      name: '',\n      description: '',\n      color: ''\n    });\n    const isEdit = ref(false);\n    const hoverTagId = ref(null);\n    const fetchTags = () => {\n      loading.value = true;\n      listTags().then(res => {\n        tags.value = res.data;\n      }).finally(() => {\n        loading.value = false;\n      });\n    };\n    onMounted(() => {\n      fetchTags();\n    });\n    const handleAdd = () => {\n      dialogTitle.value = '新增标签';\n      isEdit.value = false;\n      form.value = {\n        id: null,\n        name: '',\n        description: '',\n        color: ''\n      };\n      dialogVisible.value = true;\n    };\n    const handleEdit = row => {\n      dialogTitle.value = '编辑标签';\n      isEdit.value = true;\n      form.value = {\n        ...row\n      };\n      dialogVisible.value = true;\n    };\n    const handleDelete = row => {\n      ElMessageBox.confirm('确定要删除该标签吗？', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        deleteTag(row.id).then(() => {\n          ElMessage.success('删除成功');\n          fetchTags();\n        });\n      }).catch(() => {});\n    };\n    const handleSubmit = () => {\n      if (!form.value.name) {\n        ElMessage.warning('请输入标签名称');\n        return;\n      }\n      if (isEdit.value) {\n        updateTag(form.value.id, {\n          name: form.value.name,\n          description: form.value.description,\n          color: form.value.color\n        }).then(() => {\n          ElMessage.success('修改成功');\n          dialogVisible.value = false;\n          fetchTags();\n        });\n      } else {\n        createTag({\n          name: form.value.name,\n          description: form.value.description,\n          color: form.value.color\n        }).then(() => {\n          ElMessage.success('新增成功');\n          dialogVisible.value = false;\n          fetchTags();\n        });\n      }\n    };\n    const __returned__ = {\n      tags,\n      loading,\n      dialogVisible,\n      dialogTitle,\n      form,\n      isEdit,\n      hoverTagId,\n      fetchTags,\n      handleAdd,\n      handleEdit,\n      handleDelete,\n      handleSubmit,\n      get listTags() {\n        return listTags;\n      },\n      get createTag() {\n        return createTag;\n      },\n      get deleteTag() {\n        return deleteTag;\n      },\n      get updateTag() {\n        return updateTag;\n      },\n      ref,\n      onMounted,\n      get ElMessage() {\n        return ElMessage;\n      },\n      get ElMessageBox() {\n        return ElMessageBox;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["listTags","createTag","deleteTag","updateTag","ref","onMounted","ElMessage","ElMessageBox","tags","loading","dialogVisible","dialogTitle","form","id","name","description","color","isEdit","hoverTagId","fetchTags","value","then","res","data","finally","handleAdd","handleEdit","row","handleDelete","confirm","confirmButtonText","cancelButtonText","type","success","catch","handleSubmit","warning"],"sources":["C:/Users/52291/Desktop/test/blog/blog/blog-frontend/src/views/tags/AllTags.vue"],"sourcesContent":["<script setup>\r\nimport { listTags, createTag, deleteTag, updateTag } from '@/api/tags'\r\nimport { ref, onMounted } from 'vue'\r\nimport { ElMessage, ElMessageBox } from 'element-plus'\r\n\r\nconst tags = ref([])\r\nconst loading = ref(false)\r\nconst dialogVisible = ref(false)\r\nconst dialogTitle = ref('')\r\nconst form = ref({ id: null, name: '', description: '', color: '' })\r\nconst isEdit = ref(false)\r\nconst hoverTagId = ref(null)\r\n\r\nconst fetchTags = () => {\r\n    loading.value = true\r\n    listTags().then(res => {\r\n        tags.value = res.data\r\n    }).finally(() => {\r\n        loading.value = false\r\n    })\r\n}\r\n\r\nonMounted(() => {\r\n    fetchTags()\r\n})\r\n\r\nconst handleAdd = () => {\r\n    dialogTitle.value = '新增标签'\r\n    isEdit.value = false\r\n    form.value = { id: null, name: '', description: '', color: '' }\r\n    dialogVisible.value = true\r\n}\r\n\r\nconst handleEdit = (row) => {\r\n    dialogTitle.value = '编辑标签'\r\n    isEdit.value = true\r\n    form.value = { ...row }\r\n    dialogVisible.value = true\r\n}\r\n\r\nconst handleDelete = (row) => {\r\n    ElMessageBox.confirm('确定要删除该标签吗？', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning',\r\n    }).then(() => {\r\n        deleteTag(row.id).then(() => {\r\n            ElMessage.success('删除成功')\r\n            fetchTags()\r\n        })\r\n    }).catch(() => {})\r\n}\r\n\r\nconst handleSubmit = () => {\r\n    if (!form.value.name) {\r\n        ElMessage.warning('请输入标签名称')\r\n        return\r\n    }\r\n    if (isEdit.value) {\r\n        updateTag(form.value.id, {\r\n            name: form.value.name,\r\n            description: form.value.description,\r\n            color: form.value.color\r\n        }).then(() => {\r\n            ElMessage.success('修改成功')\r\n            dialogVisible.value = false\r\n            fetchTags()\r\n        })\r\n    } else {\r\n        createTag({\r\n            name: form.value.name,\r\n            description: form.value.description,\r\n            color: form.value.color\r\n        }).then(() => {\r\n            ElMessage.success('新增成功')\r\n            dialogVisible.value = false\r\n            fetchTags()\r\n        })\r\n    }\r\n}\r\n</script>\r\n\r\n<template>\r\n    \r\n<el-card>\r\n    <div style=\"margin-bottom: 16px; text-align: right;\">\r\n        <el-button type=\"primary\" @click=\"handleAdd\">新增标签</el-button>\r\n    </div>\r\n    <el-table :data=\"tags\" style=\"width: 100%\" :loading=\"loading\">\r\n        <el-table-column label=\"标签名称\">\r\n            <template #default=\"scope\">\r\n                <el-tag\r\n                    :style=\"{\r\n                      backgroundColor: hoverTagId === scope.row.id ? scope.row.color : scope.row.color,\r\n                      color: '#fff',\r\n                      border: 'none',\r\n                      cursor: 'pointer',\r\n                      transition: 'background 0.2s'\r\n                    }\"\r\n                    @mouseenter=\"hoverTagId = scope.row.id\"\r\n                    @mouseleave=\"hoverTagId = null\"\r\n                >\r\n                    {{ scope.row.name }}\r\n                </el-tag>\r\n            </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"description\" label=\"描述\" />\r\n        <el-table-column label=\"操作\" width=\"180\">\r\n            <template #default=\"scope\">\r\n                <el-button size=\"small\" @click=\"handleEdit(scope.row)\">编辑</el-button>\r\n                <el-button size=\"small\" type=\"danger\" @click=\"handleDelete(scope.row)\">删除</el-button>\r\n            </template>\r\n        </el-table-column>\r\n    </el-table>\r\n    <el-dialog v-model=\"dialogVisible\" :title=\"dialogTitle\" width=\"400px\">\r\n        <el-form :model=\"form\" label-width=\"80px\">\r\n            <el-form-item label=\"标签名称\">\r\n                <el-input v-model=\"form.name\" />\r\n            </el-form-item>\r\n            <el-form-item label=\"描述\">\r\n                <el-input v-model=\"form.description\" />\r\n            </el-form-item>\r\n            <el-form-item label=\"颜色\">\r\n                <el-color-picker v-model=\"form.color\" />\r\n                <el-input v-model=\"form.color\" style=\"width: 120px; margin-left: 10px;\" />\r\n            </el-form-item>\r\n        </el-form>\r\n        <template #footer>\r\n            <el-button @click=\"dialogVisible = false\">取消</el-button>\r\n            <el-button type=\"primary\" @click=\"handleSubmit\">确定</el-button>\r\n        </template>\r\n    </el-dialog>\r\n</el-card>\r\n</template>\r\n\r\n<style scoped>\r\n:deep(.el-tag) {\r\n  transition: background 0.2s;\r\n}\r\n:deep(.el-tag):hover {\r\n  filter: none !important;\r\n  opacity: 1 !important;\r\n  background: none !important;\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}