{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { useUserStore } from '@/store/user';\nimport { ElMessage } from 'element-plus';\nexport default {\n  __name: 'RegisterView',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const router = useRouter();\n    const userStore = useUserStore();\n    const form = ref({\n      username: '',\n      password: '',\n      confirmPassword: '',\n      email: ''\n    });\n    const agreed = ref(false);\n    const loading = ref(false);\n    const validatePassword = (rule, value, callback) => {\n      if (value !== form.value.password) {\n        callback(new Error('两次输入的密码不一致'));\n      } else {\n        callback();\n      }\n    };\n    const rules = ref({\n      username: [{\n        required: true,\n        message: '请输入用户名',\n        trigger: 'blur'\n      }, {\n        min: 3,\n        max: 20,\n        message: '长度在 3 到 20 个字符',\n        trigger: 'blur'\n      }],\n      password: [{\n        required: true,\n        message: '请输入密码',\n        trigger: 'blur'\n      }, {\n        min: 6,\n        max: 20,\n        message: '长度在 6 到 20 个字符',\n        trigger: 'blur'\n      }, {\n        pattern: /^(?=.*[a-z])(?=.*\\d).+$/,\n        message: '必须包含字母和数字',\n        trigger: 'blur'\n      }],\n      confirmPassword: [{\n        required: true,\n        message: '请确认密码',\n        trigger: 'blur'\n      }, {\n        validator: validatePassword,\n        trigger: 'blur'\n      }],\n      email: [{\n        required: true,\n        message: '请输入邮箱',\n        trigger: 'blur'\n      }, {\n        type: 'email',\n        message: '请输入正确的邮箱格式',\n        trigger: ['blur', 'change']\n      }]\n    });\n\n    // 处理注册\n    const handleRegister = async () => {\n      if (!agreed.value) {\n        ElMessage.warning('请阅读并同意用户协议和隐私政策');\n        return;\n      }\n      loading.value = true;\n      const result = await userStore.register({\n        username: form.value.username,\n        password: form.value.password,\n        email: form.value.email\n      });\n      loading.value = false;\n      if (result.success) {\n        ElMessage.success('注册成功，请登录');\n        router.push('/login');\n      } else {\n        ElMessage.error(result.message);\n      }\n    };\n\n    // 跳转到登录页面\n    const goToLogin = () => {\n      router.push('/login');\n    };\n    const __returned__ = {\n      router,\n      userStore,\n      form,\n      agreed,\n      loading,\n      validatePassword,\n      rules,\n      handleRegister,\n      goToLogin,\n      ref,\n      get useRouter() {\n        return useRouter;\n      },\n      get useUserStore() {\n        return useUserStore;\n      },\n      get ElMessage() {\n        return ElMessage;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","useRouter","useUserStore","ElMessage","router","userStore","form","username","password","confirmPassword","email","agreed","loading","validatePassword","rule","value","callback","Error","rules","required","message","trigger","min","max","pattern","validator","type","handleRegister","warning","result","register","success","push","error","goToLogin"],"sources":["C:/Users/52291/Desktop/test/blog/blog/blog-frontend/src/views/RegisterView.vue"],"sourcesContent":["<template>\r\n  <div class=\"register-container\">\r\n    <div class=\"register-form\">\r\n      <div class=\"header\">\r\n        <div class=\"logo\">\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n            <path d=\"M19 22H5a3 3 0 0 1-3-3V3a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v12h4v4a3 3 0 0 1-3 3zm-1-5v2a1 1 0 0 0 2 0v-2h-2zM6 7v2h8V7H6zm0 4v2h8v-2H6zm0 4v2h5v-2H6z\"/>\r\n          </svg>\r\n          <h1>创建账号</h1>\r\n        </div>\r\n        <p class=\"subtitle\">加入我们的知识社区</p>\r\n      </div>\r\n      \r\n      <el-form ref=\"registerForm\" :model=\"form\" :rules=\"rules\" class=\"form-content\">\r\n        <el-form-item prop=\"username\">\r\n          <el-input \r\n            v-model=\"form.username\" \r\n            placeholder=\"用户名\"\r\n            prefix-icon=\"User\"\r\n          />\r\n        </el-form-item>\r\n        \r\n        <el-form-item prop=\"password\">\r\n          <el-input \r\n            v-model=\"form.password\" \r\n            type=\"password\" \r\n            placeholder=\"密码\"\r\n            prefix-icon=\"Lock\"\r\n            show-password\r\n          />\r\n        </el-form-item>\r\n        \r\n        <el-form-item prop=\"confirmPassword\">\r\n          <el-input \r\n            v-model=\"form.confirmPassword\" \r\n            type=\"password\" \r\n            placeholder=\"确认密码\"\r\n            prefix-icon=\"Lock\"\r\n            show-password\r\n          />\r\n        </el-form-item>\r\n        \r\n        <el-form-item prop=\"email\">\r\n          <el-input \r\n            v-model=\"form.email\" \r\n            placeholder=\"邮箱\"\r\n            prefix-icon=\"Message\"\r\n          />\r\n        </el-form-item>\r\n        \r\n        <el-form-item>\r\n          <el-button \r\n            type=\"primary\" \r\n            @click=\"handleRegister\"\r\n            :loading=\"loading\"\r\n            class=\"register-btn\"\r\n          >\r\n            <span v-if=\"!loading\">注册账号</span>\r\n            <span v-else>注册中...</span>\r\n          </el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n      \r\n      <div class=\"footer\">\r\n        <p>已有账号? <span class=\"link\" @click=\"goToLogin\">立即登录</span></p>\r\n        <div class=\"agreement\">\r\n          <el-checkbox v-model=\"agreed\">我已阅读并同意</el-checkbox>\r\n          <span class=\"link\">用户协议</span>和<span class=\"link\">隐私政策</span>\r\n        </div>\r\n        <p class=\"copyright\">© 2024 博客系统 - 分享你的知识</p>\r\n      </div>\r\n    </div>\r\n    \r\n    <div class=\"decoration\">\r\n      <div class=\"shape shape-1\"></div>\r\n      <div class=\"shape shape-2\"></div>\r\n      <div class=\"shape shape-3\"></div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport { useUserStore } from '@/store/user'\r\nimport { ElMessage } from 'element-plus'\r\n\r\nconst router = useRouter()\r\nconst userStore = useUserStore()\r\n\r\nconst form = ref({\r\n  username: '',\r\n  password: '',\r\n  confirmPassword: '',\r\n  email: ''\r\n})\r\n\r\nconst agreed = ref(false)\r\nconst loading = ref(false)\r\n\r\nconst validatePassword = (rule, value, callback) => {\r\n  if (value !== form.value.password) {\r\n    callback(new Error('两次输入的密码不一致'))\r\n  } else {\r\n    callback()\r\n  }\r\n}\r\n\r\nconst rules = ref({\r\n  username: [\r\n    { required: true, message: '请输入用户名', trigger: 'blur' },\r\n    { min: 3, max: 20, message: '长度在 3 到 20 个字符', trigger: 'blur' }\r\n  ],\r\n  password: [\r\n    { required: true, message: '请输入密码', trigger: 'blur' },\r\n    { min: 6, max: 20, message: '长度在 6 到 20 个字符', trigger: 'blur' },\r\n    { pattern: /^(?=.*[a-z])(?=.*\\d).+$/, \r\n      message: '必须包含字母和数字', trigger: 'blur' }\r\n  ],\r\n  confirmPassword: [\r\n    { required: true, message: '请确认密码', trigger: 'blur' },\r\n    { validator: validatePassword, trigger: 'blur' }\r\n  ],\r\n  email: [\r\n    { required: true, message: '请输入邮箱', trigger: 'blur' },\r\n    { type: 'email', message: '请输入正确的邮箱格式', trigger: ['blur', 'change'] }\r\n  ]\r\n})\r\n\r\n// 处理注册\r\nconst handleRegister = async () => {\r\n  if (!agreed.value) {\r\n    ElMessage.warning('请阅读并同意用户协议和隐私政策')\r\n    return\r\n  }\r\n  \r\n  loading.value = true\r\n  const result = await userStore.register({\r\n    username: form.value.username,\r\n    password: form.value.password,\r\n    email: form.value.email\r\n  })\r\n  \r\n  loading.value = false\r\n  \r\n  if (result.success) {\r\n    ElMessage.success('注册成功，请登录')\r\n    router.push('/login')\r\n  } else {\r\n    ElMessage.error(result.message)\r\n  }\r\n}\r\n\r\n// 跳转到登录页面\r\nconst goToLogin = () => {\r\n  router.push('/login')\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.register-container {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  min-height: 100vh;\r\n  background: linear-gradient(135deg, #a777e3, #6e8efb);\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n\r\n.register-form {\r\n  width: 450px;\r\n  padding: 40px;\r\n  background: rgba(255, 255, 255, 0.9);\r\n  border-radius: 16px;\r\n  box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);\r\n  backdrop-filter: blur(10px);\r\n  z-index: 10;\r\n  position: relative;\r\n}\r\n\r\n.header {\r\n  text-align: center;\r\n  margin-bottom: 30px;\r\n}\r\n\r\n.logo {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 12px;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.logo svg {\r\n  width: 36px;\r\n  height: 36px;\r\n  fill: #a777e3;\r\n}\r\n\r\n.logo h1 {\r\n  font-size: 28px;\r\n  color: #333;\r\n  font-weight: 600;\r\n}\r\n\r\n.subtitle {\r\n  color: #666;\r\n  font-size: 16px;\r\n  margin-top: 5px;\r\n}\r\n\r\n.form-content {\r\n  margin-top: 20px;\r\n}\r\n\r\n.register-btn {\r\n  width: 100%;\r\n  height: 45px;\r\n  font-size: 16px;\r\n  margin-top: 10px;\r\n}\r\n\r\n.footer {\r\n  margin-top: 25px;\r\n  text-align: center;\r\n  font-size: 14px;\r\n  color: #666;\r\n}\r\n\r\n.link {\r\n  color: #a777e3;\r\n  cursor: pointer;\r\n  font-weight: 500;\r\n  transition: color 0.3s;\r\n}\r\n\r\n.link:hover {\r\n  color: #8e5fd9;\r\n  text-decoration: underline;\r\n}\r\n\r\n.agreement {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 5px;\r\n  margin: 15px 0;\r\n  font-size: 13px;\r\n}\r\n\r\n.copyright {\r\n  margin-top: 15px;\r\n  font-size: 12px;\r\n  color: #999;\r\n}\r\n\r\n.decoration {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  pointer-events: none;\r\n}\r\n\r\n.shape {\r\n  position: absolute;\r\n  border-radius: 50%;\r\n  background: rgba(255, 255, 255, 0.1);\r\n}\r\n\r\n.shape-1 {\r\n  width: 250px;\r\n  height: 250px;\r\n  top: -80px;\r\n  left: -80px;\r\n  border-radius: 30% 70% 70% 30% / 30% 30% 70% 70%;\r\n  background: linear-gradient(45deg, rgba(255,255,255,0.1), rgba(255,255,255,0.2));\r\n}\r\n\r\n.shape-2 {\r\n  width: 180px;\r\n  height: 180px;\r\n  bottom: -50px;\r\n  right: 10%;\r\n  border-radius: 50%;\r\n  background: rgba(255, 255, 255, 0.15);\r\n}\r\n\r\n.shape-3 {\r\n  width: 120px;\r\n  height: 120px;\r\n  top: 40%;\r\n  right: 20%;\r\n  border-radius: 40% 60% 60% 40% / 40% 40% 60% 60%;\r\n  background: rgba(255, 255, 255, 0.1);\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}